<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SOLICITUD | ALTA</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="../css/style.css">
</head>

<body>
    <div class="container text-center">
        <h1>MONDAINAI SERE | SISTEMA EXPERTO EN RELACIONES EMPRESARIALES</h1>
        <br><br>
        <h2>FORMATO DE ENTREGA DE CUENTA PARA COBRANZA EXTRA JUDICIAL</h2>
        <h2> Información general de la cuenta</h2>
        <hr>
        <form autocomplete="off" class="needs-validation" id="mi-formulario" novalidate>
            <div class="row mb-3 align-items-end">

                <div class="col-md-3">
                    <div class="mb-3">
                        <label class="form-label"># DE CLIENTE PADRE: </label>
                        <input type="text" class="form-control" name="NoClientePadre" id="NoClientePadre" maxlength="10"
                            required>
                    </div>
                </div>
                
                <div class="col-md-3">
                    <div class="mb-3">
                        <label class="form-label"># DE CLIENTE HIJO: </label>
                        <input type="text" class="form-control" name="NoClienteHijo" id="NoClienteHijo" maxlength="10"
                            required>
                    </div>
                </div>

                <div class="col-md-3 ">
                    <div class="mb-3">
                        <label class="form-label">TIPO DE CASO (C)</label>
                        <select class="form-select" name="TipoDeCaso" id="TipoDeCaso" required>
                            <option selected disabled value=""></option>
                            <option value="ExtraJudicial">EXTRAJUDICIAL</option>
                            <option value="Judicial">JUDICIAL</option>
                        </select>
                    </div>
                </div>

                <div class="col-md-3 mx-auto">
                    <div class="mb-3">
                        <label class="form-label">FECHA DE ASIGNACIÓN: </label>
                        <input type="date" class="form-control" name="FechaDeAsignacion" id="FechaDeAsignacion" readonly
                            required>
                    </div>
                </div>

                <!-- INFORMACIÓN DEL DEUDOR Y CONTACTO PRINCIPAL -->
                <h2>INFORMACIÓN DEL DEUDOR Y CONTACTO PRINCIPAL</h2>
                <hr>
                <div class="col-md-3">
                    <div class="mb-3">
                        <label class="form-label">TIPO DE DEUDOR:</label>
                        <select class="form-select" name="RegimenDeudor" id="RegimenDeudor"
                            onchange="mostrarCamposSegunRegimen()" required>
                            <option selected disabled value=""></option>
                            <option value="Persona Moral">Persona Moral</option>
                            <option value="Persona Fisica">Persona Física</option>
                            <option value="Persona Fisica con Actividad Empresarial">Persona Física con Actividad
                                Empresarial</option>
                        </select>
                    </div>
                </div>
                <!-- PERSONA MORAL  -->
                <div class="row mb-3 align-items-end" id="camposPersonaMoral">
                    <div class="col-md-3">
                        <div class="mb-3">
                            <label class="form-label">RAZÓN SOCIAL</label>
                            <input type="text" class="form-control" name="RazonSocial" id="RazonSocial" maxlength="150">
                        </div>
                    </div>

                    <div class="col-md-3">
                        <div class="mb-3">
                            <label class="form-label">DIRECCIÓN COMERCIAL:</label>
                            <input type="text" class="form-control" name="DireccionComercial" id="DireccionComercial"
                                maxlength="150">
                        </div>
                    </div>

                    <div class="col-md-3">
                        <div class="mb-3">
                            <label class="form-label">¿CUENTA CON ALGÚN PODER NOTARIAL?</label>
                            <select class="form-select" name="PoderNotarial" id="PoderNotarial"
                                onchange="mostrarCampoDetalle()">
                                <option selected disabled value=""></option>
                                <option value="Si">SI</option>
                                <option value="No">NO</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-md-3" id="campoDetalle">
                        <div class="mb-3">
                            <label class="form-label">¿Cuál?</label>
                            <input type="text" class="form-control" name="PoderNotarialDetalle"
                                id="PoderNotarialDetalle" maxlength="150">
                        </div>
                    </div>

                    <div class="col-md-3">
                        <div class="mb-3">
                            <label class="form-label">DOMICILIO FISCAL:</label>
                            <input type="text" class="form-control" name="DomicilioFiscalPM" id="DomicilioFiscalPM"
                                maxlength="150">
                        </div>
                    </div>

                </div>

                <!-- PERSONA FISICA CON ACTIVIDAD EMPRESARIAL -->
                <div class="row mb-3" id="camposPersonaFisicaActEmp">
                    <div class="col-md-3">
                        <div class="mb-3">
                            <label class="form-label">DOMICILIO FISCAL:</label>
                            <input type="text" class="form-control" name="DomicilioFiscalPFAE" id="DomicilioFiscalPFAE"
                                maxlength="150">
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="mb-3">
                            <label class="form-label">DOMICILIO PERSONAL:</label>
                            <input type="text" class="form-control" name="DomicilioPersonalPFAE"
                                id="DomicilioPersonalPFAE" maxlength="150">
                        </div>
                    </div>

                    <div class="col-md-3">
                        <div class="mb-3">
                            <label class="form-label">DOMICILIO LABORAL:</label>
                            <input type="text" class="form-control" name="DomicilioLaboralPFAE"
                                id="DomicilioLaboralPFAE" maxlength="150">
                        </div>
                    </div>
                </div>

                <!-- PERSONA FISICA -->
                <div class="row mb-3" id="camposPersonaFisica">
                    <div class="col-md-3">
                        <div class="mb-3">
                            <label class="form-label">DOMICILIO PERSONAL:</label>
                            <input type="text" class="form-control" name="DomicilioPersonalPF" id="DomicilioPersonalPF"
                                maxlength="150">
                        </div>
                    </div>

                    <div class="col-md-3">
                        <div class="mb-3">
                            <label class="form-label">DOMICILIO LABORAL:</label>
                            <input type="text" class="form-control" name="DomicilioLaboralPF" id="DomicilioLaboralPF"
                                maxlength="150">
                        </div>
                    </div>
                </div>

                <!-- CAMPOS COMUNES DE TODOS LOS REGIMENES -->
                <div class="col-md-3">
                    <div class="mb-3">
                        <label class="form-label">R.F.C: </label>
                        <input type="text" class="form-control" name="Rfc" id="Rfc" maxlength="13" required>
                    </div>
                </div>

                <div class="col-md-3">
                    <div class="mb-3">
                        <label class="form-label">CURP: </label>
                        <input type="text" class="form-control" name="Curp" id="Curp" maxlength="18" required>
                    </div>
                </div>

                <!-- <div class="col-md-3">
                    <div class="mb-3">
                        <label class="form-label">NOMBRE DEL CONTACTO PRINCIPAL</label>
                        <input type="text" class="form-control" name="NombreContactoPrincipal"
                            id="NombreContactoPrincipal" maxlength="10">
                    </div>
                </div>

                <div class="col-md-3">
                    <div class="mb-3">
                        <label class="form-label">PUESTO / CARGO DEL CONTACTO PRINCIPAL:</label>
                        <input type="text" class="form-control" name="PuestoCargoContactoPrincipal" id="PuestoCargoContactoPrincipal" maxlength="10">
                    </div>
                </div> -->

                <div class="col-md-3">
                    <div class="mb-3">
                        <label class="form-label">DOMICILIO DE ENTREGA / SERVICIO:</label>
                        <input type="text" class="form-control" name="DomicilioEntrega" id="DomicilioEntrega"
                            maxlength="150">
                    </div>
                </div>

                <div class="col-md-3">
                    <div class="mb-3">
                        <label class="form-label">DOMICILIO ALTERNATIVO:</label>
                        <input type="text" class="form-control" name="DomicilioAlternativo" id="DomiciliosAlternativo"
                            maxlength="150">
                    </div>
                </div>

                <div class="col-md-3">
                    <div class="mb-3">
                        <label class="form-label">¿VÍA PRINCIPAL DE CONTACTO?:</label>
                        <input type="text" class="form-control" name="ViaPrincipalDeContacto"
                            id="ViaPrincipalDeContacto" maxlength="150"
                            placeholder="Correo, teléfono, visita domiciliaria " required>
                    </div>
                </div>

                <div class="col-md-3">
                    <div class="mb-3">
                        <label class="form-label">EN EL PROCESO DE OTORGAMIENTO DE CRÉDITO, ¿EL DOMICILIO DEL CLIENTE
                            FUE CONFIRMADO FÍSICAMENTE?:</label>
                        <select class="form-select" name="DomicilioConfirmado" id="DomicilioConfirmado"
                            onchange="mostrarCampoFechaValidacion()" required>
                            <option selected disabled value=""></option>
                            <option value="Si">SI</option>
                            <option value="No">NO</option>
                        </select>
                    </div>
                </div>
                <div class="col-md-3" id="campoFechaValidacion">
                    <div class="mb-3">
                        <label class="form-label">FECHA DE VALIDACIÓN: </label>
                        <input type="date" class="form-control" name="FechaValidacion" id="FechaValidacion">
                    </div>
                </div>

                <div class="col-md-3">
                    <div class="mb-3">
                        <label class="form-label">NÚMERO DE CELULAR:</label>
                        <input type="text" class="form-control" name="NumeroCelular" id="NumeroCelular" required>
                        <small id="avisoCelular" class="form-text text-danger"></small>
                    </div>
                </div>
                
                <div class="col-md-3">
                    <div class="mb-3">
                        <label class="form-label">TELÉFONO FIJO #1:</label>
                        <input type="text" class="form-control" name="TelefonoFijoUno" id="TelefonoFijoUno" required>
                        <small id="avisoFijoUno" class="form-text text-danger"></small>
                    </div>
                </div>
                
                <div class="col-md-3">
                    <div class="mb-3">
                        <label class="form-label">TELÉFONO FIJO #2:</label>
                        <input type="text" class="form-control" name="TelefonoFijoDos" id="TelefonoFijoDos">
                        <small id="avisoFijoDos" class="form-text text-danger"></small>
                    </div>
                </div>                

                <div class="col-md-3">
                    <div class="mb-3">
                        <label class="form-label">CORREO ELECTRÓNICO:</label>
                        <input type="email" class="form-control" name="Email" id="Email">
                        <small id="resultado" class="form-text text-danger"></small>
                    </div>
                </div>

                <div class="col-md-3">
                    <div class="mb-3">

                    </div>
                </div>

                <div class="col-md-3 mx-auto">
                    <div class="mb-3">

                    </div>
                </div>

                <!-- BOTON -->
                <div class="row mb-3">
                    <div class="col-md-3 offset-md-10 justify-content-end">
                        <button id="Registrar" type="submit" class="btn btn-primary btn-lg">Registrar</button>
                    </div>
                </div>
            </div>
        </form>
        <div id="success-message" class="alert alert-success d-none" role="alert">
            <strong>Datos guardados correctamente</strong> <br> Por favor presione siguiente para seguir con tu
            registro.
        </div>
    </div>


    <nav aria-label="Page navigation example">
        <ul class="pagination justify-content-end">
            <li class="page-item disabled">
                <a class="page-link">Atras</a>
            </li>
            <li class="page-item">
                <a class="page-link" href="/frontend/html/Contactos.html">Siguiente</a>
            </li>
        </ul>
    </nav>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        // ENVIO DE FORMULARIO PRIMERA PARTE
        $(document).ready(function () {
            $("#mi-formulario").submit(function (e) {
                e.preventDefault(); // Evita que el formulario se envíe normalmente

                // Agregar el valor de la fecha actual al campo FechaDeAsignacion antes de enviar los datos
                $("#FechaDeAsignacion").val(new Date().toISOString().split('T')[0]);

                // Realiza la solicitud POST al backend usando AJAX
                $.ajax({
                    type: "POST",
                    url: "http://localhost:3000/guardar-datos", // Cambia esta URL por la correcta
                    data: $(this).serialize(),
                    success: function (response) {
                        if (response.success) {
                            // Si la operación fue exitosa, muestra la alerta de éxito
                            $("#success-message").removeClass("d-none");
                            // Desactiva todos los campos del formulario
                            $(
                                "#mi-formulario input, #mi-formulario select, #mi-formulario button"
                            ).prop("disabled", true);
                        } else {
                            // Maneja el caso en el que la operación no fue exitosa
                            console.log("Hubo un error al guardar los datos");
                        }
                    },
                    error: function () {
                        console.log("Error al enviar la solicitud al servidor");
                    },
                });
            });
        });

        // Obtenemos el elemento de entrada de fecha por su ID
        var fechaInput = document.getElementById("FechaDeAsignacion");
        // Creamos un nuevo objeto de fecha con la fecha actual
        var fechaActual = new Date();
        // Formateamos la fecha actual como YYYY-MM-DD (que es el formato aceptado para <input type="date">)
        var formatoFecha =
            fechaActual.getFullYear() +
            "-" +
            ("0" + (fechaActual.getMonth() + 1)).slice(-2) +
            "-" +
            ("0" + fechaActual.getDate()).slice(-2);
        // Establecemos el valor del campo de entrada de fecha al formato de fecha actual
        fechaInput.value = formatoFecha;
    </script>
    <script src="../js/script.js"></script>

</body>

</html>